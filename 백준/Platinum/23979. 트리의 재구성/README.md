# [Platinum II] 트리의 재구성 - 23979 

[문제 링크](https://www.acmicpc.net/problem/23979) 

### 성능 요약

메모리: 174268 KB, 시간: 1652 ms

### 분류

자료 구조, 구현, 최소 공통 조상, 희소 배열, 트리

### 문제 설명

<p>정점 <em>N</em>개로 이루어진 트리가 있다. 정점은 1번부터 <em>N</em>번까지 번호가 매겨져 있고, 트리의 간선은 양방향이며 각 간선마다 비용이 모두 다르다.</p>

<p>다음과 같은 쿼리를 수행하는 프로그램을 작성하여라.</p>

<ul>
	<li><code>u v w a b</code>: <em>u</em>에서 <em>v</em>로 가는 비용이 <em>w</em>인 간선을 잇는다. 지웠을 때 트리가 되는 간선 중 새로 추가한 간선을 제외한 비용이 가장 큰 간선 하나를 지운다. 재구성된 트리의 <em>a</em>에서 <em>b</em>로 가는 경로의 비용을 출력한다.</li>
</ul>

<p>각 쿼리가 끝나면 트리는 처음 상태로 돌아간다.</p>

### 입력 

 <p>첫째 줄에 정점의 개수 <em>N</em>과 쿼리의 개수 <em>Q</em>가 주어진다. (2 ≤ <em>N, Q</em> ≤ 100,000)</p>

<p>둘째 줄부터 <em>N</em>-1개의 줄에 두 정점과 두 정점을 잇는 간선의 비용인 정수 <i>C</i>가 주어진다. (1 ≤ <i>C</i> ≤ 200,000)</p>

<p>다음 줄부터 각 쿼리의 <em>u, v, w, a, b</em>가 주어진다. (1 ≤ <em>w</em> ≤ 200,000, u ≠ v)</p>

### 출력 

 <p>각 쿼리의 답을 출력한다.</p>

